<!DOCTYPE html><html><head><title>otis</title><meta http-equiv="content-type" content="text/html; charset=UTF-8"><link rel="stylesheet" media="all" href="../../doc-style.css"><script src="../../doc-filelist.js"></script><script>var relativeDir = '../../', thisFile = '/Users/bryn/.otis/templates/tmpl.jade', defaultSidebar = true;</script><script src="../../doc-script.js"></script></head><body><div id="sidebar_wrapper"><div id="sidebar_switch"><span class="tree">Files</span><span class="headings">Headings</span></div><div id="tree"></div><div id="headings"></div></div><div id="sidebar-toggle"></div><div id="container"><div class="background highlight"></div><table cellpadding="0" cellspacing="0"><tbody><tr><td class="docs"><h1>otis</h1></td><td class="code highlight"></td></tr><tr><td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
</td><td class="code highlight"><div class="highlight"><pre><span class="err">#</span><span class="o">!</span><span class="err">/usr/bin/env node</span>

<span class="c1">// Generated by CoffeeScript 1.3.3</span>
<span class="kd">var</span> <span class="nx">Otis</span><span class="p">,</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">argv</span><span class="p">,</span> <span class="nx">color</span><span class="p">,</span> <span class="nx">configFilenames</span><span class="p">,</span> <span class="nx">configToUse</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">field</span><span class="p">,</span> <span class="nx">fields</span><span class="p">,</span> <span class="nx">filename</span><span class="p">,</span> <span class="nx">fs</span><span class="p">,</span> <span class="nx">homeCfg</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">localJSConfig</span><span class="p">,</span> <span class="nx">newArgv</span><span class="p">,</span> <span class="nx">optimist</span><span class="p">,</span> <span class="nx">opts</span><span class="p">,</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">pwd</span><span class="p">,</span> <span class="nx">pwdCfg</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">watchr</span><span class="p">,</span> <span class="nx">_i</span><span class="p">,</span> <span class="nx">_j</span><span class="p">,</span> <span class="nx">_k</span><span class="p">,</span> <span class="nx">_len</span><span class="p">,</span> <span class="nx">_len1</span><span class="p">,</span> <span class="nx">_len2</span><span class="p">,</span> <span class="nx">_localJSConfig</span><span class="p">,</span> <span class="nx">_ref</span><span class="p">,</span> <span class="nx">_ref1</span><span class="p">,</span> <span class="nx">_ref10</span><span class="p">,</span> <span class="nx">_ref11</span><span class="p">,</span> <span class="nx">_ref12</span><span class="p">,</span> <span class="nx">_ref2</span><span class="p">,</span> <span class="nx">_ref3</span><span class="p">,</span> <span class="nx">_ref4</span><span class="p">,</span> <span class="nx">_ref5</span><span class="p">,</span> <span class="nx">_ref6</span><span class="p">,</span> <span class="nx">_ref7</span><span class="p">,</span> <span class="nx">_ref8</span><span class="p">,</span> <span class="nx">_ref9</span><span class="p">;</span>

<span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">);</span>

<span class="nx">watchr</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;watchr&quot;</span><span class="p">);</span>

<span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;fs&quot;</span><span class="p">);</span>

<span class="nx">Otis</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;otis&quot;</span><span class="p">).</span><span class="nx">Otis</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;colors&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_ref</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="s2">&quot;magenta&quot;</span><span class="p">,</span> <span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="s2">&quot;underline&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;cyan&quot;</span><span class="p">,</span> <span class="s2">&quot;yellow&quot;</span><span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="nx">_i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">_len</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">_i</span> <span class="o">&lt;</span> <span class="nx">_len</span><span class="p">;</span> <span class="nx">_i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">color</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">[</span><span class="nx">_i</span><span class="p">];</span>
    <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">__defineGetter__</span><span class="p">(</span><span class="nx">color</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">pwd</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>

<span class="nx">configToUse</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="nx">argv</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;optimist&quot;</span><span class="p">).</span><span class="nx">argv</span><span class="p">;</span>

<span class="k">if</span> <span class="p">((</span><span class="nx">argv</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="k">void</span> <span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;use&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">((</span><span class="nx">argv</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="k">void</span> <span class="mi">0</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toString</span><span class="p">().</span><span class="nx">trim</span><span class="p">().</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">configToUse</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toString</span><span class="p">().</span><span class="nx">trim</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">configFilenames</span> <span class="o">=</span> <span class="p">[];</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">configToUse</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">homeCfg</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">HOME</span><span class="p">,</span> <span class="s2">&quot;.otis&quot;</span><span class="p">,</span> <span class="s2">&quot;otis.config.&quot;</span> <span class="o">+</span> <span class="nx">configToUse</span> <span class="o">+</span> <span class="s2">&quot;.js&quot;</span><span class="p">);</span>
  <span class="nx">pwdCfg</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">pwd</span><span class="p">,</span> <span class="s2">&quot;otis.config.&quot;</span> <span class="o">+</span> <span class="nx">configToUse</span> <span class="o">+</span> <span class="s2">&quot;.js&quot;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">existsSync</span><span class="p">(</span><span class="nx">homeCfg</span><span class="p">)</span> <span class="o">||</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">existsSync</span><span class="p">(</span><span class="nx">pwdCfg</span><span class="p">)))</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Config &quot;</span> <span class="o">+</span> <span class="nx">configToUse</span> <span class="o">+</span> <span class="s2">&quot; could not be found in ./ or ~/&quot;</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">configFilenames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">HOME</span><span class="p">,</span> <span class="s2">&quot;.otis&quot;</span><span class="p">,</span> <span class="s2">&quot;otis.config.js&quot;</span><span class="p">));</span>
    <span class="nx">configFilenames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">homeCfg</span><span class="p">);</span>
    <span class="nx">configFilenames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pwdCfg</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">configFilenames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">HOME</span><span class="p">,</span> <span class="s2">&quot;.otis&quot;</span><span class="p">,</span> <span class="s2">&quot;otis.config.js&quot;</span><span class="p">));</span>
  <span class="nx">configFilenames</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">pwd</span><span class="p">,</span> <span class="s2">&quot;otis.config.js&quot;</span><span class="p">));</span>
<span class="p">}</span>

<span class="nx">localJSConfig</span> <span class="o">=</span> <span class="p">{};</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">_j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">_len1</span> <span class="o">=</span> <span class="nx">configFilenames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">_j</span> <span class="o">&lt;</span> <span class="nx">_len1</span><span class="p">;</span> <span class="nx">_j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">filename</span> <span class="o">=</span> <span class="nx">configFilenames</span><span class="p">[</span><span class="nx">_j</span><span class="p">];</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">_localJSConfig</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">filename</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Using config file &#39;&quot;</span> <span class="o">+</span> <span class="nx">filename</span> <span class="o">+</span> <span class="s2">&quot;&#39;.&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">key</span> <span class="k">in</span> <span class="nx">_localJSConfig</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">_localJSConfig</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">_localJSConfig</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">localJSConfig</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">continue</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">optimist</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;optimist&quot;</span><span class="p">).</span><span class="nx">usage</span><span class="p">(</span><span class="s2">&quot;\n===============================================================================\nDOCKER\nUsage: $0 [use &lt;config&gt;] [options] [files to document]\n\nWhen &#39;use &lt;config&gt;&#39; is present, otis will attempt to load config files in the\nfollowing order:\n    &quot;</span> <span class="o">+</span> <span class="s2">&quot;~/.otis/otis.config.js&quot;</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot;\n    &quot;</span> <span class="o">+</span> <span class="s2">&quot;~/.otis/otis.config.&lt;config&gt;.js&quot;</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot;\n    &quot;</span> <span class="o">+</span> <span class="s2">&quot;./otis.config.&lt;config&gt;.js&quot;</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot;\n    ... and will bail with an error if neither of the latter two could be found.\n\nWhen there is no &#39;use &lt;config&gt;&#39; argument specified, otis will use this order\ninstead:\n    &quot;</span> <span class="o">+</span> <span class="s2">&quot;~/.otis/otis.config.js&quot;</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot;\n    &quot;</span> <span class="o">+</span> <span class="s2">&quot;./otis.config.js&quot;</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot;\n\n&quot;</span> <span class="o">+</span> <span class="s2">&quot;~/.otis/&quot;</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot; is also a great place to store your custom templates, etc. as well.&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;use&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;inDir&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;Input directory (defaults to current dir)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref11</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">inDir</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref11</span> <span class="o">:</span> <span class="nx">pwd</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;outDir&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;Output directory (defaults to ./doc)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref10</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">outDir</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref10</span> <span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">pwd</span><span class="p">,</span> <span class="s2">&quot;doc&quot;</span><span class="p">)).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;tplDir&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;Directory containing dox.&lt;ext&gt;, code.&lt;ext&gt;, and tmpl.&lt;ext&gt;&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref9</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">tplDir</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref9</span> <span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;res&quot;</span><span class="p">)).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;tplEngine&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;Template parser (see github.com/visionmedia/consolidate.js)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref8</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">tplEngine</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref8</span> <span class="o">:</span> <span class="s2">&quot;internal&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;tplExtension&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;Template file extension &quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref7</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">tplExtension</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref7</span> <span class="o">:</span> <span class="s2">&quot;jst&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;markdownEngine&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;Only two choices, cowboy.&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref6</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">markdownEngine</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref6</span> <span class="o">:</span> <span class="s2">&quot;marked&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="s2">&quot;onlyUpdated&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="s2">&quot;Only process files that have been changed&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">onlyUpdated</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;colourScheme&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="s2">&quot;Color scheme to use (as in pygmentize -L styles)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">colourScheme</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;css&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;CSS file to include after pygments CSS (you can specify this flag multiple times)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref5</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">css</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref5</span> <span class="o">:</span> <span class="p">[]).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Output an index.html page that instantly redirects to the specified file.&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref4</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref4</span> <span class="o">:</span> <span class="kc">null</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;tolerant&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;Will parse comments without a leading ! (ex: \&quot;/**! ...\&quot;)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref3</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">tolerant</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref3</span> <span class="o">:</span> <span class="kc">false</span><span class="p">).</span><span class="kr">boolean</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;watch&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;Watch on the input directory for file changes (experimental)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">watch</span><span class="p">).</span><span class="kr">boolean</span><span class="p">(</span><span class="s2">&quot;w&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;ignoreHidden&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;Ignore hidden files and directories (starting with . or _)&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">ignoreHidden</span><span class="p">).</span><span class="kr">boolean</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;sidebarState&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;Whether the sidebar should be open or not by default&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref2</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">sidebarState</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref2</span> <span class="o">:</span> <span class="s2">&quot;yes&quot;</span><span class="p">).</span><span class="kr">boolean</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;exclude&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;Paths to exclude&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">_ref1</span> <span class="o">=</span> <span class="nx">localJSConfig</span><span class="p">.</span><span class="nx">exclude</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref1</span> <span class="o">:</span> <span class="kc">false</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="s2">&quot;writeConfig&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="s2">&quot;Write &#39;otis.config.js&#39; in PWD using the options provided.&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">).</span><span class="kr">boolean</span><span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">).</span><span class="nx">alias</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;help&quot;</span><span class="p">).</span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="s2">&quot;Show this help text.&quot;</span><span class="p">)[</span><span class="s2">&quot;default&quot;</span><span class="p">](</span><span class="s2">&quot;h&quot;</span><span class="p">,</span> <span class="kc">false</span><span class="p">).</span><span class="kr">boolean</span><span class="p">(</span><span class="s2">&quot;h&quot;</span><span class="p">);</span>

<span class="nx">argv</span> <span class="o">=</span> <span class="nx">optimist</span><span class="p">.</span><span class="nx">argv</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">argv</span><span class="p">.</span><span class="nx">help</span> <span class="o">||</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">optimist</span><span class="p">.</span><span class="nx">showHelp</span><span class="p">();</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">argv</span><span class="p">.</span><span class="nx">css</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">))</span> <span class="p">{</span>
  <span class="nx">argv</span><span class="p">.</span><span class="nx">css</span> <span class="o">=</span> <span class="p">[</span><span class="nx">argv</span><span class="p">.</span><span class="nx">css</span><span class="p">];</span>
  <span class="nx">argv</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">[</span><span class="nx">argv</span><span class="p">.</span><span class="nx">y</span><span class="p">];</span>
<span class="p">}</span>

<span class="nx">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;inDir&quot;</span><span class="p">,</span> <span class="s2">&quot;outDir&quot;</span><span class="p">,</span> <span class="s2">&quot;tplDir&quot;</span><span class="p">,</span> <span class="s2">&quot;tplEngine&quot;</span><span class="p">,</span> <span class="s2">&quot;tplExtension&quot;</span><span class="p">,</span> <span class="s2">&quot;markdownEngine&quot;</span><span class="p">,</span> <span class="s2">&quot;onlyUpdated&quot;</span><span class="p">,</span> <span class="s2">&quot;colourScheme&quot;</span><span class="p">,</span> <span class="s2">&quot;css&quot;</span><span class="p">,</span> <span class="s2">&quot;index&quot;</span><span class="p">,</span> <span class="s2">&quot;tolerant&quot;</span><span class="p">,</span> <span class="s2">&quot;ignoreHidden&quot;</span><span class="p">,</span> <span class="s2">&quot;sidebarState&quot;</span><span class="p">,</span> <span class="s2">&quot;exclude&quot;</span><span class="p">];</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Options:&quot;</span><span class="p">.</span><span class="nx">white</span><span class="p">.</span><span class="nx">bold</span><span class="p">);</span>

<span class="nx">opts</span> <span class="o">=</span> <span class="p">{};</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">_k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">_len2</span> <span class="o">=</span> <span class="nx">fields</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">_k</span> <span class="o">&lt;</span> <span class="nx">_len2</span><span class="p">;</span> <span class="nx">_k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">field</span> <span class="o">=</span> <span class="nx">fields</span><span class="p">[</span><span class="nx">_k</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">argv</span><span class="p">[</span><span class="nx">field</span><span class="p">]</span> <span class="o">!==</span> <span class="k">void</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">continue</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">opts</span><span class="p">[</span><span class="nx">field</span><span class="p">]</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">[</span><span class="nx">field</span><span class="p">];</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">field</span><span class="p">.</span><span class="nx">red</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span><span class="p">.</span><span class="nx">white</span> <span class="o">+</span> <span class="p">((</span><span class="nx">_ref12</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">[</span><span class="nx">field</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">_ref12</span> <span class="o">:</span> <span class="s2">&quot;-&quot;</span><span class="p">).</span><span class="nx">toString</span><span class="p">().</span><span class="nx">grey</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">((</span><span class="nx">argv</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">writeConfig</span> <span class="o">:</span> <span class="k">void</span> <span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;fs&quot;</span><span class="p">).</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">pwd</span><span class="p">,</span> <span class="s2">&quot;otis.config.js&quot;</span><span class="p">),</span> <span class="s2">&quot;module.exports = &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;util&#39;</span><span class="p">).</span><span class="nx">inspect</span><span class="p">(</span><span class="nx">opts</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="s2">&quot;utf8&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Otis</span><span class="p">(</span><span class="nx">opts</span><span class="p">);</span>

<span class="nx">args</span> <span class="o">=</span> <span class="nx">argv</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">newArgv</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;use&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">newArgv</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
      <span class="nx">i</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">args</span> <span class="o">=</span> <span class="nx">newArgv</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">argv</span><span class="p">.</span><span class="nx">watch</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">d</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">d</span><span class="p">.</span><span class="nx">doc</span><span class="p">(</span><span class="nx">args</span><span class="p">);</span>
<span class="p">}</span>
</pre></div></td></tr></tbody></table></div></body></html>